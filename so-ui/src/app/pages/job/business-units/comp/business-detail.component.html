<div class="row page-titles">
    <div class="col-md-5 align-self-center">
        <h4 class="text-themecolor">Business Units Details</h4>
    </div>
    <div class="col-md-7 align-self-center text-right">
        <div class="d-flex justify-content-end align-items-center">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                <li class="breadcrumb-item active">Business Units Details</li>
            </ol>
            <button type="button" class="btn btn-info d-none d-lg-block m-l-15"
                [routerLink]="['/job/business-units/busli']">Back</button>
        </div>
    </div>
</div>

<div class="col-lg-12">
    <div class="card card-body">
        <div class="row p-2">

            <div class="form-group col-6 col-md-4">
                <label class="control-label">Business Name</label>
                <input type="text" class="form-control form-control-line" placeholder="Business Name"
                    (keypress)="commonService.isValidName($event)" [(ngModel)]="businessUnit.buName">
            </div>

            <div class="form-group col-6 col-md-4">
                <label class="control-label">Business Code</label>
                <input type="text" class="form-control form-control-line" placeholder="Business Code"
                    [(ngModel)]="businessUnit.buCode">
            </div>

            <div class="col-6 form-group">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="read[0]"
                        [(ngModel)]="businessUnit.hasProducts">
                    <label class="custom-control-label" for="read[0]">Has Products</label>
                </div>
            </div>

            <div class="col-6 form-group">
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" id="read[1]"
                        [(ngModel)]="businessUnit.hasServices">
                    <label class="custom-control-label" for="read[1]">Has Services</label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover table-bordered">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Division Name</th>
                                <th>Remarks</th>
                                <th *ngIf="businessUnit.hasProducts">Product</th>
                                <th *ngIf="businessUnit.hasServices">Service</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let division of businessUnit.divisions; let i=index">
                                <td>
                                    {{i+1}}
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-line"
                                        (keypress)="commonService.isValidName($event)"
                                        [(ngModel)]="division.divisionName" [ngModelOptions]="{standalone: true}"
                                        placeholder="Division Name">
                                </td>
                                <td>
                                    <input type="text" class="form-control form-control-line"
                                        [(ngModel)]="division.remarks" [ngModelOptions]="{standalone: true}"
                                        placeholder="Remarks">
                                </td>
                                <td class="text-center" *ngIf="businessUnit.hasProducts && division.id!=null">
                                    <a href="javascript:void(0)" (click)="openProductModelComponent(division.productNames,i,division.id)">
                                        {{division.productNames.length === null ? '0' : division.productNames.length}}
                                    </a>
                                </td>
                                <td class="text-center" *ngIf="businessUnit.hasProducts && division.id==null">
                                    <a href="javascript:void(0)"
                                        (click)="openProductModelComponent(division.productNames,i,division.id)">Product</a>
                                </td>

                                <td class="text-center" *ngIf="businessUnit.hasServices && division.id!=null">
                                    <a href="javascript:void(0)"
                                        (click)="openServiceModelComponent(division.serviceNames,division.id,i)">
                                        {{division.serviceNames.length === null ? '0' : division.serviceNames.length}}

                                    </a>
                                </td>
                                <td class="text-center" *ngIf="businessUnit.hasServices && division.id==null">
                                    <a href="javascript:void(0)"
                                        (click)="openServiceModelComponent(division.serviceNames,division.id,i)">service</a>
                                </td>
                                <td>
                                    <a href="javascript:void(0)" (click)="addNewDivision()" data-toggle="tooltip"
                                        data-original-title="Edit">
                                        <i class="fa fa-plus text-inverse m-r-10"></i> </a>
                                    <a href="javascript:void(0)" (click)="deleteDivision(i)">
                                        <i class="fa fa-close text-danger"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-12 col-md-6">
                <button type="submit" style="width:75px;" class="btn btn-info waves-effect waves-light mr-1"
                    (click)="save()"  [routerLink]="['/job/business-units/busli']">Save</button>
                <button type="submit" style="width:75px;" class="btn btn-warning waves-effect waves-light"
                    [routerLink]="['/job/business-units/busli']">Cancel</button>
            </div>
        </div>
    </div>
</div>